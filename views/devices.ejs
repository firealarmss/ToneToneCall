<%- include('layouts/main', { title: 'Smart Devices', user: user }) %>

<div class="container">
    <h1>Smart Devices</h1>
    <ul class="list-group">
        <% devices.forEach(device => { %>
            <li class="list-group-item">
                <%= device.brand %> - <%= device.ip %> - <%= device.active ? 'On' : 'Off' %>
                <form action="/devices/<%= device.id %>/toggle" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-secondary">Toggle</button>
                </form>
                <form action="/devices/<%= device.id %>/delete" method="POST" style="display:inline;">
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
                <form action="/devices/<%= device.id %>/edit" method="POST" style="display:inline;">
                    <input type="text" name="ip" placeholder="New IP" required>
                    <button type="submit" class="btn btn-primary">Update IP</button>
                </form>
            </li>
        <% }) %>
    </ul>
    <form action="/devices" method="POST">
        <div class="form-group">
            <label for="brand">Brand</label>
            <input type="text" class="form-control" id="brand" name="brand" required>
        </div>
        <div class="form-group">
            <label for="ip">IP Address</label>
            <input type="text" class="form-control" id="ip" name="ip" required>
        </div>
        <div class="form-group">
            <label for="active">Active</label>
            <select class="form-control" id="active" name="active" required>
                <option value="on">On</option>
                <option value="off">Off</option>
            </select>
        </div>
        <button type="submit" class="btn btn-primary">Add Device</button>
    </form>
</div>

<%- include('partials/footer') %>
